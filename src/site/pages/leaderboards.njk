---
title: Arch-Tempered Leaderboards
---
{% import "components/macros.njk" as macros %}

{% set archTemperedQuests = [
    '9‚òÖ-a-whisper-of-white-mane',
    '9‚òÖ-the-deathly-quiet-curtain',
    '9‚òÖ-like-a-moth-to-the-flame',
    '9‚òÖ-the-eye-of-the-storm',
    '9‚òÖ-the-heralds-of-destruction-cry',
    '9‚òÖ-the-scorn-of-the-sun',
    '9‚òÖ-when-blue-dust-surpasses-red-lust'
] %}

<h1>Arch-Tempered Leaderboards</h1>
<dl>
    <dt>Quests</dt>
    <dd>
        <ul>
            {# --- see .eleventy for `archTemperedLeague` --- #}
            {% for questSlug in archTemperedQuests %}
            {% set quest = collections.lookup.quest[ questSlug ] %}
                <li><a href="{{ quest.url | url }}">{{ quest.data.title }}</a></li>
            {% endfor %}
        </ul>
    </dd>
    <dt>Rules</dt>
    <dd>Freestyle</dd>
    <dt>Notes</dt>
    <dd>
        <p>
            For every quest (7), there are three trophies (3) per weapon (14) for a total of <strong>{{ 7*14*3 }}</strong> trophies!<br>
            A runner can only have one trophy per weapon and quest combination.<br>
            In case of multiple runs, only the fastest run is count.<br>
            <br>
            Note: Click on a row to expand the collected trophies!
        </p>
    </dd>
</dl>

<table class="summary">
    <tr>
        <th scope="col">Rank</th>
        <th scope="col">Runner</th>
        <th scope="col" class="summary__head--huge">ü•á</th>
        <th scope="col" class="summary__head--huge">ü•à</th>
        <th scope="col" class="summary__head--huge">ü•â</th>
        <th scope="col">Total Trophies</th>
    </tr>
    {% set previousTrophyHash   = false %}
    {% set previousRank         = 1 %}
    {% set totalTrophiesClaimed = 0 %}
    {% for trophyCollection in collections.xxx %}
        {% set runner = trophyCollection.runner %}
        {% set totalTrophies = trophyCollection.gold + trophyCollection.silver + trophyCollection.bronze %}
        {% set totalTrophiesClaimed = totalTrophiesClaimed + totalTrophies %}
        {# -- Simple extra check for same amount of trophy holders to keep the same rank -- #}
        {% set trophyHash = trophyCollection.gold + "--" + trophyCollection.silver + "--" + trophyCollection.bronze %}
        {% if previousTrophyHash === trophyHash %}
            {% set leaderboardRank = previousRank %}
        {% else %}
            {% set leaderboardRank    = loop.index %}
            {% set previousTrophyHash = trophyHash %}
            {% set previousRank       = loop.index %}
        {% endif %}
        {% if totalTrophies > 0 %}
        <tr class="toggle-runs">
            <td>
                {% if leaderboardRank == 1 %}
                    ü•á
                {% elseif leaderboardRank == 2 %}
                    ü•à
                {% elseif leaderboardRank == 3 %}
                    ü•â
                {% else %}
                    {{ leaderboardRank }}
                {% endif %}
            </td>
            <td scope="row">
                <a href="{{ runner.url | url }}">{{- runner.data.title -}}</a>
                {% if runner.data.country %}
                    <span class="flag-icon flag-icon-{{ runner.data.country }}"></span>
                {% endif %}
                {#
                {% if leaderboardRank == 1 %}
                    üèÜ
                {% endif %}
                #}
            </td>
            <td>{{ trophyCollection.gold }}</td>
            <td>{{ trophyCollection.silver }}</td>
            <td>{{ trophyCollection.bronze }}</td>
            <td>{{ totalTrophies }}</td>
        </tr>
        <tr hidden>
            <td colspan=6 style="text-align: left;">
                <p>
                    {% for trophy in trophyCollection.trophies %}
                        {% if trophy.rank == 1 or trophy.rank == 2 or trophy.rank == 3 %}
                            {% set weaponSlug = trophy.run.data.weapons | first %}
                            {% set weapon = collections.lookup.weapon[ weaponSlug ] %}
                                {% if trophy.rank == 1 %}
                                    ü•á
                                {% elseif trophy.rank == 2 %}
                                    ü•à
                                {% elseif trophy.rank == 3 %}
                                    ü•â
                                {% else %}
                                    [{{ trophy.rank }}]
                                {% endif %}
                                <a href="{{ trophy.run.url }}">
                                    <strong>{{ trophy.quest.data.title }}</strong> with <strong>{{ weapon.data.title }}</strong>.
                                </a>
                            {% if not loop.last %}
                                <br>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </p>
            </td>
        </tr>
        {% endif %}
    {% endfor %}
    <tr>
        <td colspan=5 style="text-align: left;">
            Total trophies claimed so far:
        </td>
        <td>
            {{ totalTrophiesClaimed }} / {{ 7*14*3 }}
        </td>
    </tr>
</table>
